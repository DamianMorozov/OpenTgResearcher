<Page
	x:Class="TgDownloaderDesktop.Views.TgContactsPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:helpers="using:TgDownloaderDesktop.Helpers"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:viewmodels="using:TgDownloaderDesktop.ViewModels"
	xmlns:views="using:TgDownloaderDesktop.Views"
	d:DataContext="{d:DesignInstance Type=viewmodels:TgContactsViewModel}"
	mc:Ignorable="d">

	<Page.Resources>
		<helpers:TgInverseBooleanToVisibilityConverter x:Key="InverseBooleanToVisibilityConverter" />
	</Page.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="1*" />
		</Grid.RowDefinitions>
		<!--  Load data  -->
		<views:TgLoadDataPage Grid.Row="0" Visibility="{x:Bind ViewModel.IsPageLoad, Mode=OneWay}" />
		<!--  Actions  -->
		<ContentControl
			Grid.Row="1"
			HorizontalAlignment="Stretch"
			HorizontalContentAlignment="Stretch"
			Visibility="{x:Bind ViewModel.IsPageLoad, Mode=OneWay, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
			<Expander
				x:Uid="SettingAppActions"
				Grid.Row="2"
				Margin="{StaticResource ExpanderMargin}"
				HorizontalAlignment="Stretch"
				HorizontalContentAlignment="Stretch"
				IsExpanded="True">
				<Grid Margin="0,-10,0,-10">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="1.5*" />
						<ColumnDefinition Width="1.5*" />
						<ColumnDefinition Width="1.5*" />
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="Auto" />
					</Grid.ColumnDefinitions>
					<!--  Load from storage  -->
					<Button
						Grid.Column="0"
						Margin="0,0,5,0"
						HorizontalAlignment="Stretch"
						VerticalAlignment="Stretch"
						Command="{x:Bind ViewModel.LoadDataStorageCommand, Mode=OneWay}">
						<StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
							<FontIcon Margin="0,0,10,0" Glyph="&#xe777;" />
							<TextBlock
								x:Uid="ActionLoadFromStorage"
								HorizontalAlignment="Center"
								VerticalAlignment="Center" />
						</StackPanel>
					</Button>
					<!--  Update from Telegram  -->
					<Button
						Grid.Column="1"
						Margin="0,0,5,0"
						HorizontalAlignment="Stretch"
						VerticalAlignment="Stretch"
						Command="{x:Bind ViewModel.UpdateOnlineCommand, Mode=OneWay}"
						IsEnabled="{x:Bind ViewModel.IsOnlineReady, Mode=OneWay}">
						<StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
							<FontIcon Margin="0,0,10,0" Glyph="&#xe777;" />
							<TextBlock
								x:Uid="TextBlockUpdateOnline"
								HorizontalAlignment="Center"
								VerticalAlignment="Center" />
						</StackPanel>
					</Button>
					<!--  Clear viewing  -->
					<Button
						Grid.Column="2"
						Margin="0,0,5,0"
						HorizontalAlignment="Stretch"
						VerticalAlignment="Stretch"
						Command="{x:Bind ViewModel.ClearDataStorageCommand, Mode=OneWay}">
						<StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
							<FontIcon Margin="0,0,10,0" Glyph="&#xe894;" />
							<TextBlock
								x:Uid="ActionClearView"
								HorizontalAlignment="Center"
								VerticalAlignment="Center" />
						</StackPanel>
					</Button>
					<!--  Default sort  -->
					<!--<Button
							Grid.Column="5"
							Margin="0,0,5,0"
							HorizontalAlignment="Stretch"
							VerticalAlignment="Stretch"
							Command="{x:Bind ViewModel.DefaultSortCommand, Mode=OneWay}">
							<StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
								<FontIcon Margin="0,0,10,0" Glyph="&#xe8cb;" />
								<TextBlock
									x:Uid="TextBlockDefaultSort"
									HorizontalAlignment="Center"
									VerticalAlignment="Center" />
							</StackPanel>
						</Button>-->
					<!--  Count  -->
					<TextBlock
						x:Uid="TextBlockCount"
						Grid.Column="3"
						Margin="0,0,5,0"
						HorizontalAlignment="Stretch"
						VerticalAlignment="Center"
						TextAlignment="Right" />
					<TextBlock
						Grid.Column="4"
						Margin="0,0,5,0"
						HorizontalAlignment="Stretch"
						VerticalAlignment="Center"
						Text="{x:Bind ViewModel.Dtos.Count, Mode=OneWay}"
						TextAlignment="Center" />

				</Grid>
			</Expander>
		</ContentControl>
		<!--  Data in storage  -->
		<ContentControl
			Grid.Row="2"
			HorizontalAlignment="Stretch"
			HorizontalContentAlignment="Stretch"
			Visibility="{x:Bind ViewModel.IsPageLoad, Mode=OneWay, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
			<Expander
				x:Uid="ExpanderDataInStorage"
				Grid.Row="0"
				Margin="{StaticResource ExpanderMargin}"
				HorizontalAlignment="Stretch"
				HorizontalContentAlignment="Stretch"
				IsExpanded="True">
				<ScrollView HorizontalScrollMode="Disabled" VerticalScrollMode="Auto">
					<Grid>
						<controls:DataGrid
							VerticalAlignment="Top"
							AutoGenerateColumns="False"
							Background="Transparent"
							CanUserSortColumns="True"
							HeadersVisibility="Column"
							ItemsSource="{x:Bind ViewModel.Dtos, Mode=OneWay}">
							<controls:DataGrid.Columns>
								<!--  ID  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnId"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<TextBlock
												Margin="2"
												HorizontalAlignment="Stretch"
												VerticalAlignment="Center"
												HorizontalTextAlignment="Center"
												Text="{Binding Id, Mode=OneWay}" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  Updated  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnUpdated"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<TextBlock
												Margin="5,0,5,0"
												HorizontalAlignment="Stretch"
												VerticalAlignment="Center"
												HorizontalTextAlignment="Left"
												Text="{Binding DtChanged, Mode=OneWay}" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  Is active  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnIsActive"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<ToggleButton
												Margin="2"
												HorizontalAlignment="Center"
												VerticalAlignment="Center"
												IsChecked="{Binding IsContactActive, Mode=OneWay}"
												IsEnabled="False" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  Is bot  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnIsBot"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<ToggleButton
												Margin="2"
												HorizontalAlignment="Center"
												VerticalAlignment="Center"
												IsChecked="{Binding IsBot, Mode=OneWay}"
												IsEnabled="False" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  User name  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnUserName"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<TextBlock
												Margin="5,0,5,0"
												HorizontalAlignment="Stretch"
												VerticalAlignment="Center"
												HorizontalTextAlignment="Left"
												Text="{Binding UserName, Mode=OneWay}" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  First name  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnFirstName"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<TextBlock
												Margin="2"
												HorizontalAlignment="Stretch"
												VerticalAlignment="Center"
												HorizontalTextAlignment="Left"
												Text="{Binding FirstName, Mode=OneWay}" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  Last name  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnLastName"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<TextBlock
												Margin="2"
												HorizontalAlignment="Stretch"
												VerticalAlignment="Center"
												HorizontalTextAlignment="Left"
												Text="{Binding LastName, Mode=OneWay}" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  Phone  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnPhone"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<TextBlock
												Margin="2"
												HorizontalAlignment="Stretch"
												VerticalAlignment="Center"
												HorizontalTextAlignment="Left"
												Text="{Binding Phone, Mode=OneWay}" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  Status  -->
								<controls:DataGridTemplateColumn
									x:Uid="TemplateColumnStatus"
									Width="Auto"
									CanUserReorder="True"
									CanUserSort="True">
									<controls:DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<TextBlock
												Margin="2"
												HorizontalAlignment="Stretch"
												VerticalAlignment="Center"
												HorizontalTextAlignment="Left"
												Text="{Binding Status, Mode=OneWay}" />
										</DataTemplate>
									</controls:DataGridTemplateColumn.CellTemplate>
								</controls:DataGridTemplateColumn>
								<!--  End  -->
							</controls:DataGrid.Columns>
						</controls:DataGrid>
					</Grid>
				</ScrollView>
			</Expander>
		</ContentControl>
	</Grid>
</Page>